#! /bin/sh
#
# This is the postrm script for the Debian GNU/Linux l2tp-ipsec-vpn package
#
# Written by Werner Jaeger
#
set -e

if [ "$1" = "purge" ]; then
   # if applet is running try to terminate it
   PIDS=$(pidof L2tpIPsecVpn || true)
   if [ -n "$PIDS" ]; then
      echo "Trying to terminate L2tpIPsecVpn applet" >&2
      kill $PIDS || true
   fi

	# Remove configuration files
   L2tpIPsecVpn deleteAllConfFiles || true
	rm -rf /etc/xdg/WernerJaeger

	# Remove run time files
	rm -rf /var/run/L2tpIPsecVpn
	rm -rf /var/tmp/L2tpIPsecVpn

   # Remove lock files and sockets
   rm -f /tmp/L2tpIPsecVpn-*

   # Remove syslog pipe and restart syslog service
   rm -f /var/log/l2tpipsecvpn.pipe
   service rsyslog restart || true
fi

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0